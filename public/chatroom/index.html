<!DOCTYPE html>
<html>
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Thanks for Sharing</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="icon" href="images/verycoolmathgamestitle.png" type="image/x-icon">
    
    <script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script>
    <script defer="" src="https://code.getmdl.io/1.1.3/material.min.js"></script>
    
    <script defer="" src="/__/firebase/6.2.4/firebase-app.js"></script>
    <script defer="" src="/__/firebase/6.2.4/firebase-auth.js"></script>
    <script defer="" src="/__/firebase/6.2.4/firebase-database.js"></script>
    <script defer="" src="/__/firebase/6.2.4/firebase-firestore.js"></script>
    <script defer="" src="/__/firebase/6.2.4/firebase-messaging.js"></script>
    <script defer="" src="/__/firebase/6.2.4/firebase-storage.js"></script>
    <script defer src="/__/firebase/init.js"></script>

    
    <script>

      const firebase = require("firebase");
      require("firebase/firestore");

      function getUserDetails() {

        firebase.initializeApp({
          apiKey: "AIzaSyCxRTkWjoToUoNsM8Rm6zPwiJBG_JCB4fo",
          authDomain: "verycoolthanksforsharing.firebaseapp.com",
          databaseURL: "https://verycoolthanksforsharing.firebaseio.com",
          projectId: "verycoolthanksforsharing",
          storageBucket: "verycoolthanksforsharing.appspot.com",
          messagingSenderId: "78626384450",
          appId: "1:78626384450:web:5c1a5470485502ab"
        });

        var user = firebase.auth().currentUser;
        var name, uid;

        if (user != null) {
          name = user.displayName;
          uid = user.uid;
        };

        var db = firebase.firestore();
        var website_chat = db.collection("website_chat");
        var displayNames = db.collection("displayNames");
      };

      function sendMessage(chatroom, text) {
        db.collection(chatroom).add({
          displayName: name,
          text: text,
          uid: uid,
        })
          .then(function (docRef) {
            console.log("Message sent with docid: ", docRef.id);
          })
          .catch(function (error) {
            console.error("Error sharing a very cool message, thanks for sharing though!", error);
          });
      };

      window.onload = function () {
        getUserDetails();
      };

    </script>

  </head>
  <body>
    <script src="app.js"></script>

    <body OnLoad="document.myform.txt.focus()" style="font-family: sans-serif">
      <form action="" method="post" name="myform">
        <table align="left">
          <tr>
            <td
              style="font-family: 'Times New Roman', Times, serif;font-size: 17pt;text-align: center;color: #2214B9; height: 80%; width: 100%;">
              <textarea readonly="readonly" contenteditable="true" overflow="true" name="txtusers"
                style="width: 100%; height: 30%; background-color: #D1F8D8; font-family: 'times New Roman', Times, serif; font-size: 12pt; font-weight: bold; text-align: center;">Users Online:&#13;&#10;<?php echo $users?></textarea>
            </td>
          </tr>
          <tr>
    
            <td style="font-family: sans-serif;font-size: 17pt;text-align: center; color: #2214B9;">
              <div style="height:70%;" id="hehe"> <textarea readonly="readonly" id="btw" name="txtchat"
                  style="width: 100%; color: #000000; height: 500px; background-color: #F4F8D1; font-family: 'times New Roman', Times, serif; font-size: 12pt;"><?php echo "Welcome to the $room chatroom...&#13;&#10;&#13;&#10;\n$contents"?> </textarea>
              </div>
            </td>
          </tr>
          <tr>
            <div style="width:100%;">
              <td style="width: 100%; text-align: left; height: 20%; font-size: 14pt;">
                <input id="time" contentEditable="false" id="txtt" name="txt"
                  style="width: 363px; height: 39px; font-family: 'times New Roman', Times, serif; font-size: 12pt"></textarea>
              </td>
              <td
                style="border-style: solid;border-width: 1px; height: 20%;padding-left: 8px; width: 100%; text-align: center; display: none;">
                <input id="myBtn" name="Send"
                  style="width: 100%; height: 20%; font-size: 30pt; font-family: 'Times New Roman', Times, serif; color: #19B024;"
                  type="submit" value="Send">
              </td>
            </div>
          </tr>
        </table>
      </form>

  </body>
</html>
